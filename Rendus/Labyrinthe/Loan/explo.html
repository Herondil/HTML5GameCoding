<!DOCTYPE html>
<html>
	<head>
	<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script>
		function GameLoop(input)
		{
			MovePlayer(input);
			DrawMap();
		}
		var map=
		[
			["M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M"],
			["M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_","M","M","M","M","M","M","M"],
			["M","_","_","M","_","M","_","M","_","M","M","M","M","_","M","_","_","_","M","M","_","_","_","M","_","_","M","_","M","M","M","M","M","M","_","M","M","M","_","M","M","M","M","M"],
			["M","_","_","M","_","M","M","M","M","M","_","_","_","_","_","_","M","M","M","_","_","M","_","M","M","_","M","_","_","_","_","_","_","M","M","M","_","_","_","M","_","M","V","M"],
			["M","_","_","M","_","M","I","M","_","M","M","_","_","M","_","M","M","_","_","_","_","M","_","_","_","_","M","M","M","M","M","M","_","M","M","_","_","M","_","M","_","M","M","M"],
			["M","_","_","_","_","M","_","_","_","_","_","_","_","_","M","_","_","_","M","_","_","M","_","_","_","_","_","_","_","_","_","M","_","_","_","_","_","M","_","_","_","M","M","M"],
			["M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M"],
			["M","_","_","_","_","M","_","_","_","_","_","_","_","_","M","_","_","_","M","_","_","M","_","_","_","_","_","_","_","_","_","M","_","_","_","_","_","M","_","_","_","M","M","M"],
			["M","_","_","M","_","M","J","M","_","M","M","_","_","M","_","M","M","_","_","_","_","M","_","_","_","_","M","M","M","M","M","M","_","M","M","_","_","M","_","M","_","M","M","M"],
			["M","_","_","M","_","M","M","M","M","M","_","_","_","_","_","_","M","M","M","_","_","M","_","M","M","_","M","_","_","_","_","_","_","M","M","M","_","_","_","M","_","M","S","M"],
			["M","_","_","M","_","M","_","M","_","M","M","M","M","_","M","_","_","_","M","M","_","_","_","M","_","_","M","_","M","M","M","M","M","M","_","M","M","M","_","M","M","M","M","M"],
			["M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_","M","M","M","M","M","M","M"],
			["M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M","M"]
		];
		var P1W =
		[
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","M","M","_","_","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","_","_","_","M","M","_","_","_","_","M","_","M","_","M","_","M","M","M","_","M","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","M","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","M","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","M","M","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","M","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","_","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","M","_","M","_","_","_","_","_","_","_","_","_","_","M","_","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","M","_","M","_","_","_","_","_","_","_","_","_","_","M","M","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","_","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","_","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","_","M","_","M","_","_","M","M","M","_","M","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","_","_","_","M","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]
		];
		var P2W =
		[
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","M","M","_","_","_","M","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","M","_","_","_","M","_","_","_","_","M","_","M","_","M","_","M","M","M","_","M","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","M","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","M","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","M","_","M","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","M","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","M","M","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","M","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","M","_","_","M","_","_","_","_","_","_","_","_","_","_","M","_","M"],
			["_","M","_","_","_","_","_","_","_","_","M","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","M","_","M","_","_","_","_","_","_","_","_","_","_","M","_","M"],
			["_","M","_","_","_","_","_","_","_","M","_","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","M","_","M","_","_","_","_","_","_","_","_","_","_","M","M","M"],
			["_","M","_","_","_","_","_","_","M","_","_","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","_","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","_","M","_","_","_","_","_","_","_","M","_","M","_","M","_","_","M","_","_","M","_","_","_","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","M","_","_","_","_","_","_","_","_","_","M","_","M","_","_","M","M","M","_","M","_","_","_","_","M","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","M","_","_","_","_","M","M","M","M","M","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"],
			["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]
		];
		var taillemurs = 2,
		block 	= "%c",
		P1_x = 1,
		P1_y = 3,
		P_x = 1,
		P_y = 9,
		direction = '',
		direction1 = '',
		couleurclef ="#ff0"
		couleurmurs 	= "#000",
		couleursols 	= "#fff",
		couleurP1 	= "#00f",
		couleurP = "#f00",
		loop = 0,
		color = 1,
		couleursortie 	= "#b4d455";
		for(var i = 0; !(i == taillemurs); i++){
			block += " ";
		}
		setInterval(GameLoop,1000/30);
		window.document.onkeydown = function(e){
			if(e.keyCode == 38){
				direction = 'haut';
			}
			if(e.keyCode == 37){
				direction = 'gauche';
			}
			if(e.keyCode == 39){
				direction = 'droite';
			}
			 if(e.keyCode == 40){
				direction ='bas';
			}
			if(e.keyCode == 90){
				direction1 = 'haut1';
			}
			if(e.keyCode == 81){
				direction1 = 'gauche1';
			}
			if(e.keyCode == 68){
				direction1 = 'droite1';
			}
			 if(e.keyCode == 83){
				direction1 ='bas1';
			}
		}	
		function GameLoop(){
			MovePlayer(direction);
			MovePlayer(direction1);
			DrawMap();
			direction = 'neutre'; 
			direction1 = 'neutre'; 
		}
		function MovePlayer(input){
			if(input != '')
			{
				map[P1_y][P1_x] = "_"; 
				switch(input)
				{
					case 'haut':
					{	
						if(	map[P1_y-1][P1_x]!='M' && map[P1_y-1][P1_x]!="C")
						{
							P1_y = P1_y -1;

							if (map[P1_y][P1_x]=="V") 
							{
								map[9][42]="M"
							}
							if (map[P1_y][P1_x]=="I") 
							{
								map[3][41]="_"
							}
						}	
					
						break;
					}
					case'bas':
					{
						if(map[P1_y+1][P1_x] !='M' && map[P1_y+1][P1_x]!="C")
						{
							P1_y = P1_y+1;

							if (map[P1_y][P1_x]=="V") 
							{
								map[9][42]="M"
							} 
							if (map[P1_y][P1_x]=="I") 
							{
								map[3][41]="_"
							}
						}
						break;
					}	
					case'gauche': 
					{
					if(map[P1_y][P1_x-1] !='M' && map[P1_y][P1_x-1]!="C")
					{
							P1_x = P1_x-1; 

							if (map[P1_y][P1_x]=="V") 
							{
								map[9][42]="M"
							}
							if (map[P1_y][P1_x]=="I") 
							{
								map[3][41]="_"
							}
					}
						break;
					}	
					case'droite':
					{
						if(map[P1_y][P1_x+1]!='M' && map[P1_y][P1_x+1]!="C")
						{
							P1_x = P1_x + 1;	

							if (map[P1_y][P1_x]=="V") 
							{
								map[9][42]="M"
							}	
							if (map[P1_y][P1_x]=="I") 
							{
								map[3][41]="_"
							}
						}
						break;
					}	
				}
				map[P1_y][P1_x] = "P"; 
			}
		if(input != '')
			{
				map[P_y][P_x] = "_"; 
				switch(input)
				{
					case 'haut1':
					{	
						if(	map[P_y-1][P_x]!='M' && map[P_y-1][P_x]!='P')
						{
							P_y = P_y -1;
							if (map[P_y][P_x]=="S") 
							{
								map[3][42]="M"
							}
							if (map[P_y][P_x]=="J") 
							{
								map[9][41]="_"
							}
						}	
						break;
					}
					case'bas1':
					{
						if(map[P_y+1][P_x] !='M' && map[P_y+1][P_x]!='P')
						{
							P_y = P_y+1; 
							if (map[P_y][P_x]=="S") 
							{
								map[3][42]="M"
							}
							if (map[P_y][P_x]=="J") 
							{
								map[9][41]="_"
							}
						}
						break;
					}	
					case'gauche1': 
					{
					if(map[P_y][P_x-1] !='M' && map[P_y][P_x-1]!='P')
					{
							P_x = P_x-1;
							if (map[P_y][P_x]=="S") 
							{
								map[3][42]="M"
							} 
							if (map[P_y][P_x]=="J") 
							{
								map[9][41]="_"
							}
					}
					
						break;
					}	
					case'droite1':
					{
						if(map[P_y][P_x+1]!='M' && map[P_y][P_x+1]!='P')
						{
							P_x = P_x + 1;	
							if (map[P_y][P_x]=="S") 
							{
								map[3][42]="M"
							}	
							if (map[P_y][P_x]=="J") 
							{
								map[9][41]="_"
							}
						}
						break;
					}	
				}
				map[P_y][P_x] = "C"; 
			}
		}
		function DrawMap(){
			var	tablcss = [],
				ligne = "",
				casecourante = 0,
				lignecourante = 0;
			while(true){
				casecourante = 0;
				
				while(true){
					ligne += block;
					if(map[lignecourante][casecourante]=="_"){
						tablcss.push("background : " + couleursols);
					}
					if(map[lignecourante][casecourante]=="P"){
						tablcss.push("background : " + couleurP1);
					}
					if(map[lignecourante][casecourante]=="C"){
						tablcss.push("background : " + couleurP);
					}
					if(map[lignecourante][casecourante]=="M"){
						tablcss.push("background : " + couleurmurs);
					}
					if(map[lignecourante][casecourante]=="S"){
						tablcss.push("background : " + couleursortie);
					}
					if(map[lignecourante][casecourante]=="V"){
						tablcss.push("background : " + couleursortie);
					}
					if(map[lignecourante][casecourante]=="I" || map[lignecourante][casecourante]=="J"){
						tablcss.push("background : " + couleurclef);
					}
					casecourante++;
					if(casecourante == map[lignecourante].length){
						break;
					}
				}
				lignecourante++;
				ligne += "\n";
				
				if(lignecourante == map.length){	
					break;
				}
			}
				loop+=1
				if (loop>=30) 
				{
				console.clear()
				loop =0
				}
			console.log(ligne, ...tablcss);
			if (map[9][42]=="M") 
				{
					map = P1W
					P_x = 42
					P1_y=8
				}
			if (map[3][42]=="M") 
				{
					map = P2W
					P1_x = 42
					P1_y=8
				}
			}
		</script>
	</body>
</html>